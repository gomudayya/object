# 책임 할당하기

## GRASP 패턴
`General Responsibility Assignment Software Pattern`

일반적인 책임 할당을 위한 소프트웨어 패턴.
1. Information Expert 패턴
2. Low Coupling 패턴
3. High Cohesion 패턴
4. Creator 패턴
5. Protected Variations (변경보호) 패턴

### 정보 전문가에게 책임을 할당하라 
정보 전문가 패턴 (Information Expert 패턴)

- 객체가 자신이 소유하고 있는 정보와 관련된 작업을 수행한다는 일반적인 직관을 표현 한 것.

**데이터를 반드시 저장하고 있을 필요는 없다.**

### 높은 응집도와 낮은 결합도
```
Q. 응집도와 결합도의 차이점은 무엇인가?

A. 서로의 관계는 반비례하는 관계에 있다.

결합도는 모듈과 모듈 간의 의존 정도
응집도는 한 모듈 내의 구성요소들 간의 연관 정도를 의미한다.

결합도가 높은 모듈은 서로 밀접하게 연관되어 있어 변화가 한 모듈에 발생하면 다른 모듈에 영향을 미칠 가능성이 높다
응집도가 높은 모듈은 모듈 내의 기능들이 밀접하게 관련되어 있어 하나의 기능을 수행하는 데 필요한 모든 코드가 모듈 안에 포함되어 있다.

응집도
1. 기능적 응집도 : 모듈 내의 모든 기능이 하나의 기능을 수행하는데 관련되어 있는 경우
2. 데이터 응집도 : 모듈 내의 모든 기능이 하나의 데이터 구조를 처리하는 데 관련 되어 있는 경우
3. 절차적 응집도 : 모듈 내의 모든 기능이 하나의 절차를 수행하는 데 관련되어 있는 경우
4. 통신 응집도 : 모듈 내의 모든 기능이 하나의 입력이나 출력과 관련되어 있는 경우
5. 종속 응집도 : 모듈 내의 모든 기능이 하나의 변수에 종속되어 있는 경우

결합도
1. 정적 결합도 : 컴파일 시간에 결정되는 결합도
2. 동적 결합도 : 실행 시간에 결정되는 결합도
3. 데이터 결합도 : 모듈 간에 데이터를 전달하거나 공유하는 경우
4. 제어 결합도 : 모듈 간에 제어 흐름을 전달하는 경우
5. 외부 결합도 : 모듈 간에 외부 인터페이스를 통해 상호작용하는 경우
```

### 창조자에게 객체 생성 책임을 할당하라
의도 : 어떤 방식으로든 생성되는 객체와 연결되거나 관련될 필요가 있는 객체에 해당 객체를 생성할 책임을 맡기는 것.

생성될 객체에 대해 잘 알고 있어야 하거나 그 객체를 사용해야 하는 객체는 어떤 방식으로든 생성될 객체와 연결될 것이다.

이미 결합돼 있는 객체에게 생성 책임을 할당하는 것은 설계의 전체적인 결합도에 영향을 미치지 않는다.

책의 예시

Reservation (예약) 정보를 생성하기 위해서는 누구에게 책임을 져야하는가?

1. Movie
2. Screening

Screening 은 예매에 필요한 영화, 상영 시간, 상영 순번 등의 정보에 대해 전문가이며, 예매 요금을 계산하는데 필수적인 Movie 도 알고 있다.

그렇기에 Screening 을 통하여 Reservation을 생성한다.

---
## 낮은 응집도
1. 클래스가 하나 이상의 이유로 변경돼야 한다. 변경 이유를 기준으로 클래스를 분리하라
2. 클래스의 인스턴스 초기화하는 시점에 경우에 따라 서로 다른 속성들을 초기화 하고 있다. 초기화되는 속성의 그룹을 기준으로 클래스를 분리하라
3. 메서드 그룹이 속성 그룹을 사용하는지 여부로 나뉜다. 이들 그룹을 기준으로 클래스를 분리하라

### Polymorphism 패턴
if~else, switch~case 등의 조건 논리를 사용해서 설계를 한다면 새로운 변화가 일어난 경우 조건 논리를 수정해야한다.

다형성을 통하여 새로운 변화를 다루기 쉽게 확장하기를 권장한다

## PROTECTED VARIATIONS 패턴
- 변경을 캡슐화한다.

인터페이스를 형성하여 책임을 할당한다.

```
Q. DDD 가 가지는 이점은 무엇인가?
A. 도메인의 구조를 잘 파악하고, 행동에 초점을 맞추어 설계를 하고 책임을 분배하면 코드의 형상이 도메인 모델의 구조와 유사하게 나오게 된다.
이는 실세계에서 풀어야하는 문제를 코드로 잘 옮겨졌다고 판별이 되며, 직관적으로 코드를 볼 수 있게 되었다.
또한 Polymorphism, Protected Variations 패턴등으로 유연성을 확보할 수 있다.
```

---
