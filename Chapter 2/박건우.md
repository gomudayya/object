# 2장 _ 객체지향 프로그래밍

좋은 글귀들

- 객체 내부의 접근을 통제하는 이유는 객체를 자율적인 존재로 만들기 위해서이다.
- 객체지향의 핵심은 자율적인 객체들의 공동체를 구성하는것

---

### 깨달은 점

- 비록 하나의 인스턴스 변수만 포함하더라도 개념을 명시적으로 표한하는것이 더 나을때가 있다.
    - 예제의 Money클래스
- 추상클래스의 활용
    - 인터페이스는 자주사용해도 추상 클래스는 사용하기가 조금 낯설었다.
    - 예제의 추상클래스 DiscountPolicy에 할인 조건들을 유지하고, 상속을 이용해 구체적인 할인 정책의 구현은 서브클래스에 맡기는 방식이 되게 좋은것 같다.
- 설계가 유연할 수록 코드를 이해하고 디버깅하기는 더 어려워 진다.
    - 상황에 맞춰 트레이드 오프의 적절한 지점을 찾아내는것이 중요하다.

### 의문점

- 예제코드에서는 양방향 의존관계가 강하게 걸려있다.
    - 상영(Screening) 객체를 3단계에(Movie-DiscountPolicy-DiscuntCondition) 걸쳐 DiscountCondition까지 넘겨주었다.
    - 몇 단계에 걸쳐서 양방향 의존성을 띄는 이 코드가 최선인가? 라는 생각이 들긴 했다.

---

### 메시지와 메서드

메시지와 메서드를 구분해라!

- 메시지 : 객체가 다른 객체와 상호작용하는 유일한 수단
    - 인터페이스 : 객체가 이해할 수 있는 메시지의 목록
- 메서드 : 객체가 메시지를 처리하는 방법

메시지와 메서드의 구분에서부터 다형성의 개념이 출발한다.

### 상속이 가치있는 이유는 코드 재사용이 아니라 다형성이다.

- 상속을 통해 자식 클래스는 부모 클래스의 모든 인터페이스를 포함하게 된다.
    - **즉 자식클래스는 부모클래스가 수신할 수 있는 모든 메시지를 수신할 수 있다.**
    - 이 때문에 외부 객체는 자식 클래스를 부모 클래스와 동일한 타입으로 간주 할 수 있다.
    - 다형성
- 다형성을 이용하게 되면 컴파일 타임의 의존성과 실행 시간의 의존성이 달라질 수 있다.

### 서브클래싱과 서브타이핑

- 서브클래싱
    - 구현 상속
    - 코드를 재사용하기 위한 목적으로 상속을 사용하는 것
- 서브타이핑
    - 다형적인 협력을 위해 부모클래스와 자식 클래스가 인터페이스를 공유할 수 있도록 상속을 이용하는 것
    - LSP : 부모 클래스가 처리할 수 있는것은 자식 클래스도 처리할 수 있어야 한다.

 인터페이스의 재사용을 목적으로 하지 않고, 구현을 재사용할 목적으로 상속을 사용하면 변경에 취약한 코드를 낳게 될 확률이 높다.

### 추상화의 장점

- 세부적인 내용을 무시한 채 상위 정책을 쉽고 간단하게 표현할 수 있다.
- 유연한 설계
    - 기존 구조를 수정하지 않고도 새로운 기능을 쉽게 추가하고 확장할 수 있다.
    - 추상타입에 의존하면 구현에의한 코드변경에 영향을 받지 않는다.

### 상속과 합성(구성, composition)

코드 재사용의 측면에선 상속보다는 합성이 더 좋은 방법이다.

[ 상속 ] 

- 상속은 캡슐화를 위반한다.
    - 상속을 이용하기 위해선 자식클래스가 부모클래스에대해 잘 알고 있어야한다.
    - 자식클래스가 부모클래스에 강하게 결합된다.
    - 부모클래스의 변경에 따라 자식클래스가 오동작할 수 있다.
- 상속은 런타임에 인스턴스를 바꾸는 방식이 불가능하다.

[ 합성 ]

- 객체의 인터페이스를 통해 약하게 결합된다. (느슨한 결합)
    - 해당 객체의 세부사항(구현)에 대해 몰라도 된다.
- 런타임에 인스턴스를 바꾸는 것이 가능하다.

 코드를 재사용이 목적이라면 합성을 선호하는 것이 옳지만 다형성을 위해 인터페이스를 재사용하는 경우에는 상속과 합성을 조합해서 사용할 수 밖에 없다.

---

# 질문

1. 상속보다 합성을 이용하라는 것은 어떤 의미인가?
    - 답변
        
        상속보다 합성을 이용하라는 것은 **코드를 재사용 할 때** 상속보다는 합성을 이용하라는 의미입니다. 상속의 단점은 자식클래스가 부모클래스가 강하게 결합된다는 것입니다. 자식클래스는 부모클래스를 알고 있어야하며, 부모클래스의 변경이 자식클래스에 영향을 미칠 수 있습니다. 또한 합성은 추가적으로 런타임에 인스턴스를 변경이 가능하다는 장점이 있습니다.
        
2. 객체지향 프로그래밍에서 추상화란? 추상화의 장점은?
    - 답변
        
         추상화는 객체간에 공통점을 취해서 일반화된 타입을 만들어내는 것을 말합니다. 추상화된 타입에 의존하도록 하면 보다 내부 구현 코드가 변경되어도 영향을 받지 않기 때문에 보다 유연한 설계가 가능하다는 장점이 있습니다.
        
3. 상속을 어떤 때에 사용하는가?
    - 답변
        
        상속은 코드 재사용의 목적으로 사용할 수 있고, 다형성을 이용한 프로그래밍을 하기 위해 사용할 수 있습니다.