# 3장 역할, 책임, 협력

## 협력

- 객체지향 시스템에서 객체들은 고립된 존재가 아닌 서로 협력 하는 존재들이다. (자율적인 공동체)
- 협력이라는 맥락(Context) 안에서 객체들의 책임이 결정 된다.
  - 예제의 코드는 영화 예매를 위해서 객체들이 서로 협력한다.
  - 영화 예매라는 맥락 안에서 객체들이 책임이 결정된다 
    - Screening : 예매 
    - Movie : 요금 계산
    - DiscountPolicy : 할인액 계산

---

## 책임

- 책임은 하는 것과 아는 것으로 나뉜다.
- 객체는 어떤 책임을 위해서는 그 책임을 수행하는데 필요한 정보도 알아야 할 책임이 있다. (아는 것)
  - Movie객체는 요금을 계산한다. (하는 것)
  - Movie객체는 할인 정책을 알고있다. (아는 것)
- 객체에게 할당한 책임이 외부의 인터페이스와 내부의 속성을 결정한다. (책임이 먼저다)
- 객체의 구현은 책임을 결정한다음에 생각해도 늦지 않는다.
- 정보 전문가에게 책임을 할당하자
  - 그 일을 가장 잘 알고있는 객체에게 책임을 할당하자.



### 정리

1. 먼저 시스템 전체의 책임을 생각해보자. (무엇을 위해 협력할 것인가?) -> 영화 예매
2. 시스템 책임을 더 작은 책임으로 분할한다.
3. 메시지를 결정하고 (예매하라)
4. 메시지를 처리할 객체 선택한다. 이 때 예메에 대해 가장 잘 알고있는 객체가 이 책임을 수행한다(Screening)
5. 2-4 과정을 반복한다. (책임에 필요한 메시지를 생각하고, 객체에 책임을 할당한다)

### 위 설계의 특징
- 메시지가 객체를 결정한다.
- 장점
  - 객체는 꼭 필요한 퍼블릭 인터페이스만 갖게된다.
  - 충분히 추상적인 인터페이스를 갖게된다. (How(구현)가 아닌 What(인터페이스)에 집중하기 때문에)
- 행동이 상태를 결정한다.

---

## 역할

- 특정 협력(작은 협력) 안에서 수행하는 책임의 집합
- 객체가 동일한 책임을 할 때? 역할이라는 개념으로 추상화 
  - AmountDiscountPolicy, PercentDiscountPolicy -> DiscountPolicy (둘다 할인액 계산책임)
  - DiscountPolicy 역할을 수행하는 어떤 객체도 이 협력에 참여할 수 있다.

### 역할의 장점

- 중복 코드 제거
- 객체들의 협력을 보다 단순하게 바라볼 수 있음
  - 하위요소들(구현)을 생각하지 않기 때문에
- 유연하다
  - 동일한 책임을 통합하기 때문에 변경과 확장이 쉽다.

